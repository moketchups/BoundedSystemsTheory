server {
    listen 80;
    server_name _;

    # HSAP attestation endpoints
    location /.well-known/hsap/ {
        alias /var/www/hsap/;

        # CORS headers
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods 'GET, OPTIONS';
        add_header Access-Control-Allow-Headers 'Content-Type';

        # Cache headers
        add_header Cache-Control "public, max-age=86400";

        # Content type for JSON files
        types {
            application/json json;
            application/x-pem-file pem;
            text/plain txt;
        }
    }

    # Health check
    location /health {
        return 200 'OK';
        add_header Content-Type text/plain;
    }
}
